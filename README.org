#+TITLE: PP-CTI

This repository contains all the necessary resources to build and depoy the
PP-CTI subcomponent on the Resilmesh network.

* Deployment

** Creating the Resilmesh network

All ResilMesh containers run on a special network called
=resilmesh_network=. This network should be created in advance with the
following command:

#+begin_src sh
  docker network create resilmesh_network
#+end_src

** Preparing Anonymizer configuration

The anonymization subproject (=anonymizer/=) requires a bit of manual
configuration.  Edit =anonymizer/config.yaml= and set the correct values for the
MISP instance's URL (=services.misp.url=) and API key (=services.misp.key=).

** Launching PP-CTI

#+begin_src sh
  docker compose --env-file .env up --build -d
#+end_src

#+begin_src sh
  docker compose --env-file .env down --remove-orphans
#+end_src

** Launching from another project

To set PP-CTI as a dependency, simply =include= the PP-CTI Compose file in your
main Compose file.  The syntax to do this is:

#+begin_src yaml
  include:
    - path: your/path/to/PP-CTI/compose.yaml
      project_directory: your/path/to/PP-CTI
#+end_src

Optionally, add an =env_file= key to the YAML specifying the PP-CTI =.env= file.
If not specified, Docker will use your project's environment - make sure to add
any necessary PP-CTI environment variables if this is the case.
